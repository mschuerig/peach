---
commit: "3e007de7eb78dafaf185284531a8120d89a22e0d"
date: "2026-02-25T14:50:05+01:00"
author: "Michael Sch√ºrig <michael@schuerig.de>"
subject: "Update PRD: add pitch matching paradigm, restructure phases, cleanup roadmap"
sessions: ["8dfadd3c-ee71-4230-9503-e190c2757061"]
prev: "9843da5a5f.md"
next: "c5e6679eaa.md"
---

[‚Üê Previous (9843da5a5f)](9843da5a5f.md) | [Index](index.md) | [Next (c5e6679eaa) ‚Üí](c5e6679eaa.md)

# Commit 3e007de7eb

**Date:** 2026-02-25 14:50:05 UTC+01:00  
**Author:** Michael Sch√ºrig <michael@schuerig.de>

## Commit message

Update PRD: add pitch matching paradigm, restructure phases, cleanup roadmap

Add Pitch Matching as Version 0.2 scope with new user journey, functional
requirements (FR44-FR52), and NFR for real-time pitch adjustment. Restructure
phases from Post-MVP/Future to Version 0.2/Future Ideas. Remove completed
(manual algorithm focus override) and obsolete items (swappable sound sources,
MIDI output). Update FR34 to reflect current SoundFont implementation.

Co-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>

## Changed files

```
docs/planning-artifacts/prd.md | 89 ++++++++++++++++++++++++++++++++----------
 1 file changed, 69 insertions(+), 20 deletions(-)
```

## Session `8dfadd3c‚Ä¶`

*2026-02-25 13:28:28 UTC ‚Üí 2026-02-25 13:50:56 UTC*

### üßë Human (13:28:28)

<command-message>bmad-bmm-edit-prd</command-message>
<command-name>/bmad-bmm-edit-prd</command-name>
<command-args>I want to introduce a new training paradigm. Currently, users only practice to recognize pitch differences. In the new paradigm, one note is played and the user has to tune a second note to the same pitch. This requires a new UI (screen) for the training, integration with the existing screens. Behind the scenes it necessitates changes to the architecture in order to play sounds indefinitely.

Also, we should do some cleanup of the PRD:
* swappable sound sources and MIDI is probably never going to come. At most there will be a feature to import your own SoundFonts.
* "Manual algorithm focus override" is already implemented.</command-args>

### ü§ñ Assistant (13:28:31)

I'll start by loading the workflow file and the current PRD.

### ü§ñ Assistant (13:28:41)

Now let me load the edit workflow step file.

### ü§ñ Assistant (13:28:47)

Let me load the PRD purpose standards and check for validation reports.

### ü§ñ Assistant (13:29:01)

**Edit Mode: Improving an existing PRD.**

PRD found and loaded at `docs/planning-artifacts/prd.md`. No validation report found in the PRD folder.

**Edit Requirements Understood**

**PRD Format:** BMAD Standard (6/6 core sections present)
**Edit Goals:**
1. **New training paradigm** ‚Äî Add a "Pitch Matching" mode where one note plays and the user tunes a second note to match it. Requires a new UI screen, integration with existing navigation, and architectural changes to support indefinite sound playback.
2. **Cleanup ‚Äî Sound sources/MIDI** ‚Äî Remove swappable sound sources and MIDI output from the roadmap. Replace with a possible future feature to import custom SoundFonts.
3. **Cleanup ‚Äî Manual algorithm focus override** ‚Äî Remove from Post-MVP list (already implemented).

**Proceeding to deep review and analysis...**

### ü§ñ Assistant (13:29:06)

Let me perform the deep review. I'll analyze the existing PRD and related project docs to build a thorough change plan.

### ü§ñ Assistant (13:31:17)

**Deep Review Complete ‚Äî Change Plan**

**PRD Current State:** Well-structured BMAD Standard PRD with all 6 core sections. 43 FRs, solid NFRs. The PRD was written when Peach only had a comparison-based training paradigm with sine waves. Since then, SoundFont playback and manual note range configuration have been implemented, making parts of the Post-MVP roadmap stale.

---

**Proposed Change Plan**

### Section 1: Executive Summary
**Priority:** High
**Changes:**
- Broaden the core description from "two notes played in sequence, user answers higher or lower" to acknowledge both paradigms: pitch comparison *and* pitch matching
- Update to reflect that Peach trains pitch perception through multiple modalities, not just binary comparison

### Section 2: Success Criteria
**Priority:** Medium
**Changes:**
- Add pitch matching success criteria (e.g., matching accuracy improving over time)
- Existing comparison-based criteria remain valid

### Section 3: Project Scoping & Phased Development
**Priority:** Critical
**Changes:**
- **Post-MVP (Phase 2):** 
  - Remove "Swappable sound sources (sampled sounds)" ‚Äî replace with "Custom SoundFont import (user-provided .sf2 files)"
  - Remove "Manual algorithm focus override" ‚Äî already implemented
  - Add Pitch Matching training paradigm as a Phase 2 feature (or MVP if you prefer ‚Äî needs your input)
  - "Configurable pause between notes" ‚Äî still relevant?
- **Future Features (Phase 3):**
  - Remove "MIDI output to external instruments/apps"
  - Remove "Additional sound sources and timbres" ‚Äî replace with SoundFont import reference or remove entirely
  - Keep "Deeper accessibility improvements"

### Section 4: User Journeys
**Priority:** High
**Changes:**
- Add new user journey for Pitch Matching (Journey 6: "Tuning Your Ear" ‚Äî user plays reference note, tunes second note to match)
- Update Journey Requirements Summary table to include pitch matching capabilities
- Existing journeys 1-5 remain valid for comparison training

### Section 5: Mobile App Specific Requirements ‚Äî Architecture
**Priority:** Medium
**Changes:**
- Update "Swappable audio engine architecture" wording ‚Äî the protocol-based architecture exists but the emphasis should shift from "swappable sources" to "extensible playback modes" (finite notes + indefinite/continuous playback)
- Add note about continuous/indefinite audio playback capability needed for pitch matching

### Section 6: Functional Requirements
**Priority:** Critical
**Changes:**

**New FRs for Pitch Matching (new subsection):**
- User can select Pitch Matching training mode (from Start Screen or training mode selector)
- System plays a reference note indefinitely until user confirms match or skips
- User can adjust the pitch of a second note in real time via a control (slider/knob)
- User can hear the second (tunable) note simultaneously with the reference note
- System provides visual feedback showing proximity to target pitch
- User can confirm a match, recording the result
- System records pitch matching results: reference note, user's final pitch, error in cents, timestamp

**Audio Engine additions:**
- FR-new: System supports indefinite note playback (no fixed duration) with explicit stop
- FR-new: System supports real-time frequency adjustment of a playing note

**Updates to existing FRs:**
- FR34 ("User can select the sound source"): Update to reflect current SoundFont preset selection (already implemented, not just "sine wave only")

**Navigation updates:**
- FR6: Update to mention both training modes
- FR8: Clarify this applies to comparison mode; pitch matching has different interaction

### Section 7: Non-Functional Requirements
**Priority:** Low
**Changes:**
- Add latency requirement for real-time pitch adjustment (target < 20ms response to slider input)
- Existing NFRs remain valid

### Section 8: Settings (FR30-FR36)
**Priority:** Low
**Changes:**
- FR31 note range: Move out of Post-MVP mentions since it's implemented
- FR34 sound source: Update "MVP: sine wave only" parenthetical ‚Äî SoundFont presets are now the default

---

**Changes by Type:**
- **Additions:** 1 new user journey, ~8 new FRs, 1 new NFR
- **Updates:** ~6 existing sections/FRs to modernize
- **Removals:** 3 roadmap items (swappable sources, MIDI, algorithm override)
- **Restructuring:** No

**Priority Distribution:**
- **Critical:** 2 sections (Scoping, Functional Requirements)
- **High:** 2 sections (Executive Summary, User Journeys)
- **Medium:** 2 sections (Success Criteria, Architecture)
- **Low:** 2 sections (NFRs, Settings FRs)

**Estimated Effort:** Moderate

---

**Questions before proceeding:**

1. Should Pitch Matching be **Phase 2 (Post-MVP)** or should it become part of a revised MVP scope?
2. Is "Configurable pause between notes" (currently Post-MVP) still relevant, or should it be removed too?
3. For the Pitch Matching UI ‚Äî do you envision both notes playing simultaneously (user tunes while hearing the reference), or sequentially (hear reference, then tune from silence)?
4. Does this change plan align with what you had in mind? Any sections to add, remove, or reprioritize?

### üßë Human (13:43:16)

1. We are already Post-MVP. It could become Version 0.2 scope.
2. "Configurable pause" should be moved to a section of ideas for the future. The same for all the other Post-MVP features.
3. Pitch Matching: Roughly, I envision it like this: The first note plays, stops. The second note plays and continues playing. The user can use a large slider (taking up the same space as the Higher/Lower buttons) to adjust the pitch of the second note. When the user releases the slider, the second note stops. Of course, all the other cases for stopping note playback still apply, such as when the user switches to another screen. Pitch Matching should just be another button on the Start Screen, below the current "Start Training" button.
4. Your other suggestions look good.

### ü§ñ Assistant (13:43:28)

Clear. Let me update the plan with your input and proceed to the edit step.

**Approved Change Plan Summary:**

- **Pitch Matching** ‚Üí Version 0.2 scope (new section replacing Post-MVP)
- **Interaction model:** Reference note plays (finite) ‚Üí tunable note plays (indefinite) ‚Üí slider adjusts pitch ‚Üí release stops note & records result. Large slider in same space as Higher/Lower buttons. New "Pitch Matching" button below "Start Training" on Start Screen.
- **Current Post-MVP items** (temporal progress, per-note detail, iCloud sync, CSV export, configurable pause) ‚Üí move to "Future Ideas" section
- **Remove:** Swappable sound sources, MIDI output, manual algorithm focus override from roadmap
- **Add:** Custom SoundFont import to Future Ideas
- **All other proposed changes** (Executive Summary, Success Criteria, FRs, NFRs, Journey, Architecture) ‚Üí approved

**Proceeding to edit step...**

### ü§ñ Assistant (13:44:20)

**Starting PRD Edits**

**Change Plan:** 8 sections to modify across Executive Summary, Success Criteria, Scoping, User Journeys, Architecture, Functional Requirements, Non-Functional Requirements, and frontmatter.
**Total Changes:** ~15 discrete modifications
**Estimated Effort:** Moderate

**Proceeding with edits section by section...**

### ü§ñ Assistant (13:44:25)

Now I'll apply the edits section by section. Starting with frontmatter and Executive Summary, then working through each section.

### ü§ñ Assistant (13:46:07)

**Section Updated:** Frontmatter ‚Äî added edit workflow steps, lastEdited date, and edit history.

### ü§ñ Assistant (13:46:18)

**Section Updated:** Executive Summary ‚Äî broadened to cover both training paradigms.

### ü§ñ Assistant (13:46:28)

**Section Updated:** Success Criteria ‚Äî added pitch matching accuracy criterion.

Now the scoping section ‚Äî this is the biggest restructuring:

### ü§ñ Assistant (13:46:43)

**Section Updated:** Project Scoping ‚Äî replaced Post-MVP with Version 0.2 (Pitch Matching), replaced Future Features with Future Ideas (cleaned up).

Now adding Journey 6 before the Journey Requirements Summary:

### ü§ñ Assistant (13:46:58)

**Section Updated:** User Journeys ‚Äî added Journey 6 (Pitch Matching).

Now updating the Journey Requirements Summary table:

### ü§ñ Assistant (13:47:12)

**Section Updated:** Journey Requirements Summary ‚Äî added pitch matching capabilities, updated priorities.

Now updating the Architecture subsection:

### ü§ñ Assistant (13:47:19)

**Section Updated:** Architecture ‚Äî updated audio engine description, added pitch matching data model.

Now adding the Pitch Matching functional requirements and updating the Audio Engine section:

### ü§ñ Assistant (13:47:26)

**Section Updated:** Functional Requirements ‚Äî added Pitch Matching subsection (FR44-FR50a).

Now updating the Audio Engine section:

### ü§ñ Assistant (13:47:36)

**Section Updated:** Audio Engine ‚Äî added indefinite playback (FR51) and real-time frequency adjustment (FR52), broadened FR16 and FR18.

Now updating FR34 (sound source) and the Journey 3 post-MVP note:

### ü§ñ Assistant (13:47:46)

Now adding the pitch matching NFR:

### ü§ñ Assistant (13:47:53)

**Section Updated:** Non-Functional Requirements ‚Äî added real-time pitch adjustment latency requirement.

Now let me do a final review of the complete updated PRD to verify all changes are correct:

### ü§ñ Assistant (13:48:12)

**Final review complete.** All changes verified ‚Äî no unintended modifications, structure is sound, FR numbering is consistent.

---

**PRD Edits Complete**

**Changes Applied:** 10 sections modified
**PRD Updated:** `docs/planning-artifacts/prd.md`

**Summary of Changes:**

- **Executive Summary** ‚Äî broadened from comparison-only to two complementary modes (Pitch Comparison + Pitch Matching)
- **Success Criteria** ‚Äî added pitch matching accuracy criterion
- **Project Scoping** ‚Äî restructured phases: MVP (Phase 1, unchanged), Version 0.2 (Phase 2, Pitch Matching), Future Ideas (replaced Phase 3)
- **Roadmap cleanup** ‚Äî removed swappable sound sources, MIDI output, manual algorithm focus override; added custom SoundFont import to Future Ideas
- **User Journeys** ‚Äî added Journey 6: Pitch Matching ("Tune Your Ear")
- **Journey Requirements Summary** ‚Äî added 5 pitch matching capability rows, updated priorities to MVP/v0.2/Future
- **Architecture** ‚Äî updated audio engine description for indefinite playback; added pitch matching data model
- **Functional Requirements** ‚Äî added Pitch Matching subsection (FR44-FR50a), Audio Engine extensions (FR51-FR52), updated FR34 for SoundFont presets
- **Non-Functional Requirements** ‚Äî added real-time pitch adjustment latency (< 20ms)
- **Frontmatter** ‚Äî added edit history and workflow steps

**What would you like to do next?**

- **[V] Run Validation** ‚Äî execute full validation workflow
- **[S] Summary Only** ‚Äî end with summary of changes
- **[A] Adjust** ‚Äî make additional edits
- **[X] Exit** ‚Äî exit edit workflow

### üßë Human (13:49:34)

s

### ü§ñ Assistant (13:49:44)

**PRD Edit Summary**

The PRD at `docs/planning-artifacts/prd.md` has been updated with three categories of changes:

**New Feature ‚Äî Pitch Matching (Version 0.2)**
- New training paradigm: reference note plays, then tunable note plays indefinitely; user adjusts pitch via large vertical slider; releasing stops the note and records the result
- 9 new functional requirements (FR44-FR52) covering the pitch matching interaction, indefinite playback, and real-time frequency adjustment
- New user journey (Journey 6) and 5 new entries in the requirements summary table
- NFR for real-time pitch adjustment latency (< 20ms)

**Roadmap Restructuring**
- Post-MVP ‚Üí **Version 0.2** (Pitch Matching scope)
- Future Features ‚Üí **Future Ideas** (temporal progress, per-note detail, iCloud sync, CSV export, custom SoundFont import, configurable pause, accessibility)

**Cleanup**
- Removed: swappable sound sources, MIDI output, additional sound sources and timbres
- Removed: manual algorithm focus override (already implemented)
- Updated FR34 to reflect current SoundFont preset selection

### üßë Human (13:49:52)

commit this

### ü§ñ Assistant (13:50:08)

Committed as `3e007de`. Clean working tree.

### üßë Human (13:50:47)

How do I create epics/stories and a UX design for the new features in the PRD?

### ü§ñ Assistant (13:50:56)

You can use these BMAD workflows:

1. **UX Design** ‚Äî `/bmad-bmm-create-ux-design` ‚Äî This will walk you through creating/updating the UX design specification based on the PRD changes. Since you already have a UX design doc, it should help you extend it with the Pitch Matching screen, slider interaction, and Start Screen updates.

2. **Epics & Stories** ‚Äî `/bmad-bmm-create-epics-and-stories` ‚Äî This will break the Version 0.2 scope into epics and stories based on the PRD. Since you already have 10 completed epics, it should create new ones (e.g., Epic 11+) for the pitch matching work.

I'd recommend doing UX design first, then epics/stories ‚Äî the epic breakdown is more precise when it can reference concrete screen designs and interaction patterns.

---

[‚Üê Previous (9843da5a5f)](9843da5a5f.md) | [Index](index.md) | [Next (c5e6679eaa) ‚Üí](c5e6679eaa.md)
